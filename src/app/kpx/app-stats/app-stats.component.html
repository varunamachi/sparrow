<app-page-header
    pageName="Usage Stats"
    [placeholder]=false
    icon="fa fa-pie-chart"
>
    <span toolbar>
        <button pButton
            label="Refresh"
            icon = "fa-refresh"
            (click)="load()"
        >
        </button>
    </span>
</app-page-header> 

<div class="ui-g ui-fluid" *ngIf="stats">
    <div *ngFor="let i of RECENT_INFO" class="ui-g-3">
        <p-card [title]="i.name">
            <div class="ui-g">
                <div class="ui-g-2"></div>
                <div class="ui-g-4 day">Today</div>
                <div class="ui-g-4 day">Yesterday</div>
                <div class="ui-g-2"></div>
            </div>
            <div class="ui-g">
                <div class="ui-g-2"></div>
                <div class="ui-g-4 count">{{stats["today"][i.id]}}</div>
                <div class="ui-g-4 count">{{stats["yesterday"][i.id]}}</div>
                <div class="ui-g-2"></div>
            </div>
        </p-card>
    </div>
</div>
<p></p>
<div class="ui-g ui-fluid">
    <div class="ui-g-1"></div>
    <div class="ui-g-10">
        Chart &nbsp;
        <p-dropdown
            [filter]="false"
            [autoWidth]="false"
            [options]="CHARTS"
            [(ngModel)]="chartID"
            (onChange)="loadChart()"
            [style]="{'width': '40%'}"
        ></p-dropdown>
        &nbsp; For &nbsp;
        <p-dropdown
            [filter]="false"
            [autoWidth]="false"
            [options]="DAYS"
            [(ngModel)]="days"
            (onChange)="loadChart()"
            [style]="{'width': '40%'}"
        ></p-dropdown>
        &nbsp; Days
    </div>
    <div class="ui-g-1">
    </div>
</div>
<div class="ui-g" >
    <div class="ui-g-1"></div>
    <div class="ui-g-10" style="height: 90%;">
        <app-chart-table
            [stat]="chartStat"
            [chartType]="getChartType(chartStat?.type)"
        >
        </app-chart-table>
    </div>
    <div class="ui-g-1"></div>
</div>
